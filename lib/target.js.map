{"version":3,"sources":["../src/target.js"],"names":["type","el","Source","initialProps","style","width","height","document","body","clientHeight","documentElement","position","left","top","spec","drop","props","monitor","component","item","getItem","delta","getDifferenceFromInitialOffset","Math","round","x","y","move","collect","connect","connectDropTarget","dropTarget","Target","state","initialLeft","initialTop","setState","Component","Context","HTML5Backend"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAIe,UAACA,IAAD,EAAOC,EAAP,EAAWC,MAAX,EAAyC;AAAA,QAAtBC,YAAsB,uEAAP,EAAO;;AACtD,QAAMC,QAAQ;AACZC,aAAO,MADK;AAEZC,cAAQC,SAASC,IAAT,CAAcC,YAAd,IAA8BF,SAASG,eAAT,CAAyBD,YAFnD;AAGZE,gBAAU,UAHE;AAIZC,YAAM,CAJM;AAKZC,WAAK;AALO,KAAd;;AAQA,QAAMC,OAAO;AACXC,UADW,gBACLC,KADK,EACEC,OADF,EACWC,SADX,EACsB;AAC/B,YAAI,CAACA,SAAL,EAAgB;AACd;AACD;AACD,YAAMC,OAAOF,QAAQG,OAAR,EAAb;AACA,YAAMC,QAAQJ,QAAQK,8BAAR,EAAd;AACA,YAAMV,OAAOW,KAAKC,KAAL,CAAWL,KAAKP,IAAL,GAAYS,MAAMI,CAA7B,CAAb;AACA,YAAMZ,MAAMU,KAAKC,KAAL,CAAWL,KAAKN,GAAL,GAAWQ,MAAMK,CAA5B,CAAZ;AACAR,kBAAUS,IAAV,CAAef,IAAf,EAAqBC,GAArB;AACD;AAVU,KAAb;;AAaA,aAASe,OAAT,CAAkBC,OAAlB,EAA2BZ,OAA3B,EAAoC;AAClC,aAAO;AACLa,2BAAmBD,QAAQE,UAAR;AADd,OAAP;AAGD;;AA1BqD,QA4BhDC,MA5BgD;AAAA;;AA6BpD,wBAAe;AAAA;;AAAA;;AAEb,cAAKC,KAAL,GAAa;AACXrB,gBAAMT,aAAa+B,WAAb,IAA4B,CADvB;AAEXrB,eAAKV,aAAagC,UAAb,IAA2B;AAFrB,SAAb;AAFa;AAMd;;AAnCmD;AAAA;AAAA,6BAqC9CvB,IArC8C,EAqCxCC,GArCwC,EAqCnC;AACf,eAAKuB,QAAL,CAAc,EAAExB,UAAF,EAAQC,QAAR,EAAd;AACD;AAvCmD;AAAA;AAAA,iCAyC1C;AAAA,cACAiB,iBADA,GACsB,KAAKd,KAD3B,CACAc,iBADA;AAAA,uBAEc,KAAKG,KAFnB;AAAA,cAEArB,IAFA,UAEAA,IAFA;AAAA,cAEMC,GAFN,UAEMA,GAFN;;AAGR,iBACEiB,qBACAA,kBACE;AAAA;AAAA,cAAK,IAAO9B,IAAP,OAAL,EAAsB,OAAOI,KAA7B;AACG,0CAAC,MAAD,IAAQ,IAAIH,EAAZ,EAAgB,MAAMW,IAAtB,EAA4B,KAAKC,GAAjC;AADH,WADF,CAFF;AAQD;AApDmD;AAAA;AAAA,MA4BjCwB,gBA5BiC;;AAuDtD,QAAMC,UAAU,+BAAgBC,8BAAhB,EACd,0BAAWvC,IAAX,EAAiBc,IAAjB,EAAuBc,OAAvB,EAAgCI,MAAhC,CADc,CAAhB;;AAIA,WAAOM,OAAP;AACD,G","file":"target.js","sourcesContent":["import React, { Component } from 'react'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { DragDropContext, DropTarget } from 'react-dnd'\n\nexport default (type, el, Source, initialProps = {}) => {\n  const style = {\n    width: '100%',\n    height: document.body.clientHeight || document.documentElement.clientHeight,\n    position: 'absolute',\n    left: 0,\n    top: 0\n  }\n\n  const spec = {\n    drop (props, monitor, component) {\n      if (!component) {\n        return\n      }\n      const item = monitor.getItem()\n      const delta = monitor.getDifferenceFromInitialOffset()\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      component.move(left, top)\n    }\n  }\n\n  function collect (connect, monitor) {\n    return {\n      connectDropTarget: connect.dropTarget()\n    }\n  }\n\n  class Target extends Component {\n    constructor () {\n      super()\n      this.state = {\n        left: initialProps.initialLeft || 0,\n        top: initialProps.initialTop || 0\n      }\n    }\n\n    move (left, top) {\n      this.setState({ left, top })\n    }\n\n    render () {\n      const { connectDropTarget } = this.props\n      const { left, top } = this.state\n      return (\n        connectDropTarget &&\n        connectDropTarget(\n          <div id={`${type}-t`} style={style}>\n            {<Source el={el} left={left} top={top} />}\n          </div>\n        )\n      )\n    }\n  }\n\n  const Context = DragDropContext(HTML5Backend)(\n    DropTarget(type, spec, collect)(Target)\n  )\n\n  return Context\n}\n"]}