{"version":3,"sources":["../src/target.js"],"names":["type","Source","initialProps","style","width","height","document","documentElement","clientHeight","position","left","top","zIndex","Target","state","initialLeft","initialTop","setState","props","connectDropTarget","el","Component","Context","HTML5Backend","drop","monitor","component","Math","round","item","getItem","delta","getDifferenceFromInitialOffset","x","y","move","connect","dropTarget"],"mappings":"0kCAIe,SAACA,CAAD,CAAOC,CAAP,CAAqC,IAAtBC,EAAsB,wDAAP,EAAO,CAC5CC,EAAQ,CACZC,MAAO,MADK,CAEZC,OAAQC,SAASC,eAAT,CAAyBC,YAFrB,CAGZC,SAAU,UAHE,CAIZC,KAAM,CAJM,CAKZC,IAAK,CALO,CAMZC,OAAQ,GANI,CADoC,CA6B5CC,CA7B4C,aA8BhD,YAAe,kGAEb,GAAKC,KAAL,CAAa,CACXJ,KAAMR,EAAaa,WAAb,EAA4B,CADvB,CAEXJ,IAAKT,EAAac,UAAb,EAA2B,CAFrB,CAFA,EAMd,CApC+C,uEAsC1CN,CAtC0C,CAsCpCC,CAtCoC,CAsC/B,CACf,KAAKM,QAAL,CAAc,CAAEP,MAAF,CAAQC,KAAR,CAAd,CACD,CAxC+C,kCA0CtC,OAC0B,KAAKO,KAD/B,CACAC,CADA,GACAA,iBADA,CACmBC,CADnB,GACmBA,EADnB,GAEc,KAAKN,KAFnB,CAEAJ,CAFA,GAEAA,IAFA,CAEMC,CAFN,GAEMA,GAFN,CAGR,MACEQ,IACAA,EACE,+BAAK,GAAOnB,CAAP,KAAL,CAAsB,MAAOG,CAA7B,EACG,wBAAC,CAAD,EAAQ,GAAIiB,CAAZ,CAAgB,KAAMV,CAAtB,CAA4B,IAAKC,CAAjC,EADH,CADF,CAMH,CArD+C,OA6B7BU,WA7B6B,EAwD5CC,EAAU,sBAAgBC,SAAhB,EACd,iBAAWvB,CAAX,CA/CW,CACXwB,IADW,YACLN,CADK,CACEO,CADF,CACWC,CADX,CACsB,OAMlBC,KAAKC,KANa,CAC/B,GAAKF,CAAL,KAGMG,GAAOJ,EAAQK,OAAR,EAHb,CAIMC,EAAQN,EAAQO,8BAAR,EAJd,CAKMtB,EAAO,EAAWmB,EAAKnB,IAAL,CAAYqB,EAAME,CAA7B,CALb,CAMMtB,EAAM,EAAWkB,EAAKlB,GAAL,CAAWoB,EAAMG,CAA5B,CANZ,CAOAR,EAAUS,IAAV,CAAezB,CAAf,CAAqBC,CAArB,CAPA,CAQD,CAVU,CA+CX,CAlCF,SAAkByB,CAAlB,CAAoC,CAClC,MAAO,CACLjB,kBAAmBiB,EAAQC,UAAR,EADd,CAGR,CA8BC,EAAgCxB,CAAhC,CADc,CAxDkC,CA4DlD,MAAOS,EACR,C","file":"target.js","sourcesContent":["import React, { Component } from 'react'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { DragDropContext, DropTarget } from 'react-dnd'\n\nexport default (type, Source, initialProps = {}) => {\n  const style = {\n    width: '100%',\n    height: document.documentElement.clientHeight,\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    zIndex: 999\n  }\n\n  const spec = {\n    drop (props, monitor, component) {\n      if (!component) {\n        return\n      }\n      const item = monitor.getItem()\n      const delta = monitor.getDifferenceFromInitialOffset()\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      component.move(left, top)\n    }\n  }\n\n  function collect (connect, monitor) {\n    return {\n      connectDropTarget: connect.dropTarget()\n    }\n  }\n\n  class Target extends Component {\n    constructor () {\n      super()\n      this.state = {\n        left: initialProps.initialLeft || 0,\n        top: initialProps.initialTop || 0\n      }\n    }\n\n    move (left, top) {\n      this.setState({ left, top })\n    }\n\n    render () {\n      const { connectDropTarget, el } = this.props\n      const { left, top } = this.state\n      return (\n        connectDropTarget &&\n        connectDropTarget(\n          <div id={`${type}-t`} style={style}>\n            {<Source el={el} left={left} top={top} />}\n          </div>\n        )\n      )\n    }\n  }\n\n  const Context = DragDropContext(HTML5Backend)(\n    DropTarget(type, spec, collect)(Target)\n  )\n\n  return Context\n}\n"]}