{"version":3,"sources":["../src/source.js"],"names":["type","style","position","cursor","pointerEvents","propTypes","el","PropTypes","element","isRequired","isDragging","bool","connectDragSource","func","Source","state","sid","props","reportSize","left","top","t","window","document","getElementById","win","ownerDocument","defaultView","pe","getComputedStyle","opacity","Component","beginDrag","connect","monitor","dragSource"],"mappings":"yrCAKe,SAACA,CAAD,CAAU,IACjBC,GAAQ,CACZC,SAAU,OADE,CAEZC,OAAQ,MAFI,CAGZC,cAAe,MAHH,CADS,CAqBjBC,EAAY,CAChBC,GAAIC,UAAUC,OAAV,CAAkBC,UADN,CAEhBC,WAAYH,UAAUI,IAAV,CAAeF,UAFX,CAGhBG,kBAAmBL,UAAUM,IAAV,CAAeJ,UAHlB,CArBK,CA2BjBK,CA3BiB,aA4BrB,YAAe,kGAEb,GAAKC,KAAL,CAAa,CACXC,IAAQhB,CAAR,KADW,CAFA,EAKd,CAjCoB,qFAmCA,CACnB,KAAKiB,KAAL,CAAWC,UAAX,CAAsB,cAAQ,KAAKH,KAAL,CAAWC,GAAnB,CAAtB,CACD,CArCoB,kCAuCX,OACiD,KAAKC,KADtD,CACAP,CADA,GACAA,UADA,CACYE,CADZ,GACYA,iBADZ,CAC+BN,CAD/B,GAC+BA,EAD/B,CACmCa,CADnC,GACmCA,IADnC,CACyCC,CADzC,GACyCA,GADzC,CAEFC,EAAIC,OAAOC,QAAP,CAAgBC,cAAhB,CAAkCxB,CAAlC,MAFF,CAGFyB,EAAMJ,EAAEK,aAAF,CAAgBC,WAHpB,CAKFC,EAAKH,EAAII,gBAAJ,CAAqBR,CAArB,CAAwB,IAAxB,mBALH,OAMJX,EANI,EAOK,MAAP,IAPE,GAQJW,EAAEpB,KAAF,mBAA0B,MARtB,EAUC,IAVD,GAYK,MAAP,IAZE,GAaJoB,EAAEpB,KAAF,mBAA0B,MAbtB,EAgBDW,EACL,+BACE,MAAO,KAAKG,KAAL,CAAWC,GADpB,CAEE,MAAO,cAAc,CAAEG,MAAF,CAAQC,KAAR,CAAaU,QAASpB,EAAa,EAAb,CAAmB,CAAzC,CAAd,CAA4DT,CAA5D,CAFT,EAIGK,CAJH,CADK,CAhBC,CAwBT,CA/DoB,OA2BFyB,WA3BE,EAmEvB,MADAjB,GAAOT,SAAP,CAAmBA,CACnB,CAAO,iBAAWL,CAAX,CA5DM,CACXgC,SADW,YACAf,CADA,CACO,IACRX,EADQ,CACUW,CADV,CACRX,EADQ,CACJa,CADI,CACUF,CADV,CACJE,IADI,CACEC,CADF,CACUH,CADV,CACEG,GADF,CAEhB,MAAO,CAAEd,IAAF,CAAMa,MAAN,CAAYC,KAAZ,CACR,CAJU,CA4DN,CArDP,SAAkBa,CAAlB,CAA2BC,CAA3B,CAAoC,CAClC,MAAO,CACLtB,kBAAmBqB,EAAQE,UAAR,EADd,CAELzB,WAAYwB,EAAQxB,UAAR,EAFP,CAIR,CAgDM,EAAgCI,CAAhC,CACR,C","file":"source.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { DragSource } from 'react-dnd'\nimport { getSize } from './utility'\n\nexport default (type) => {\n  const style = {\n    position: 'fixed',\n    cursor: 'move',\n    pointerEvents: 'auto'\n  }\n\n  const spec = {\n    beginDrag (props) {\n      const { el, left, top } = props\n      return { el, left, top }\n    }\n  }\n\n  function collect (connect, monitor) {\n    return {\n      connectDragSource: connect.dragSource(),\n      isDragging: monitor.isDragging()\n    }\n  }\n\n  const propTypes = {\n    el: PropTypes.element.isRequired,\n    isDragging: PropTypes.bool.isRequired,\n    connectDragSource: PropTypes.func.isRequired\n  }\n\n  class Source extends Component {\n    constructor () {\n      super()\n      this.state = {\n        sid: `${type}-s`\n      }\n    }\n\n    componentDidMount () {\n      this.props.reportSize(getSize(this.state.sid))\n    }\n\n    render () {\n      const { isDragging, connectDragSource, el, left, top } = this.props\n      const t = window.document.getElementById(`${type}-t`)\n      const win = t.ownerDocument.defaultView\n      const POINTER_EVENTS = 'pointer-events'\n      const pe = win.getComputedStyle(t, null)[POINTER_EVENTS]\n      if (isDragging) {\n        if (pe !== 'auto') {\n          t.style[POINTER_EVENTS] = 'auto'\n        }\n        return null\n      } else {\n        if (pe !== 'none') {\n          t.style[POINTER_EVENTS] = 'none'\n        }\n      }\n      return connectDragSource(\n        <div\n          id={`${this.state.sid}`}\n          style={Object.assign({ left, top, opacity: isDragging ? 0.5 : 1 }, style)}\n        >\n          {el}\n        </div>\n      )\n    }\n  }\n\n  Source.propTypes = propTypes\n  return DragSource(type, spec, collect)(Source)\n}\n"]}