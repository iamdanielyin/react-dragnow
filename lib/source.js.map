{"version":3,"sources":["../src/source.js"],"names":["type","style","position","cursor","pointerEvents","spec","beginDrag","props","el","left","top","collect","connect","monitor","connectDragSource","dragSource","isDragging","propTypes","PropTypes","element","isRequired","bool","func","Source","t","window","document","getElementById","win","ownerDocument","defaultView","POINTER_EVENTS","pe","getComputedStyle","opacity","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAIe,UAACA,IAAD,EAAU;AACvB,QAAMC,QAAQ;AACZC,gBAAU,UADE;AAEZC,cAAQ,MAFI;AAGZC,qBAAe;AAHH,KAAd;;AAMA,QAAMC,OAAO;AACXC,eADW,qBACAC,KADA,EACO;AAAA,YACRC,EADQ,GACUD,KADV,CACRC,EADQ;AAAA,YACJC,IADI,GACUF,KADV,CACJE,IADI;AAAA,YACEC,GADF,GACUH,KADV,CACEG,GADF;;AAEhB,eAAO,EAAEF,MAAF,EAAMC,UAAN,EAAYC,QAAZ,EAAP;AACD;AAJU,KAAb;;AAOA,aAASC,OAAT,CAAkBC,OAAlB,EAA2BC,OAA3B,EAAoC;AAClC,aAAO;AACLC,2BAAmBF,QAAQG,UAAR,EADd;AAELC,oBAAYH,QAAQG,UAAR;AAFP,OAAP;AAID;;AAED,QAAMC,YAAY;AAChBT,UAAIU,oBAAUC,OAAV,CAAkBC,UADN;AAEhBJ,kBAAYE,oBAAUG,IAAV,CAAeD,UAFX;AAGhBN,yBAAmBI,oBAAUI,IAAV,CAAeF;AAHlB,KAAlB;;AArBuB,QA2BjBG,MA3BiB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iCA4BX;AAAA,uBACiD,KAAKhB,KADtD;AAAA,cACAS,UADA,UACAA,UADA;AAAA,cACYF,iBADZ,UACYA,iBADZ;AAAA,cAC+BN,EAD/B,UAC+BA,EAD/B;AAAA,cACmCC,IADnC,UACmCA,IADnC;AAAA,cACyCC,GADzC,UACyCA,GADzC;;AAER,cAAMc,IAAIC,OAAOC,QAAP,CAAgBC,cAAhB,CAAkC3B,IAAlC,QAAV;AACA,cAAM4B,MAAMJ,EAAEK,aAAF,CAAgBC,WAA5B;AACA,cAAMC,iBAAiB,gBAAvB;AACA,cAAMC,KAAKJ,IAAIK,gBAAJ,CAAqBT,CAArB,EAAwB,IAAxB,EAA8BO,cAA9B,CAAX;AACA,cAAIf,UAAJ,EAAgB;AACd,gBAAIgB,OAAO,MAAX,EAAmB;AACjBR,gBAAEvB,KAAF,CAAQ8B,cAAR,IAA0B,MAA1B;AACD;AACD,mBAAO,IAAP;AACD,WALD,MAKO;AACL,gBAAIC,OAAO,MAAX,EAAmB;AACjBR,gBAAEvB,KAAF,CAAQ8B,cAAR,IAA0B,MAA1B;AACD;AACF;AACD,iBAAOjB,kBACL;AAAA;AAAA;AACE,kBAAOd,IAAP,OADF;AAEE,qBAAO,sBAAc,EAAES,UAAF,EAAQC,QAAR,EAAawB,SAASlB,aAAa,GAAb,GAAmB,CAAzC,EAAd,EAA4Df,KAA5D;AAFT;AAIGO;AAJH,WADK,CAAP;AAQD;AApDoB;AAAA;AAAA,MA2BF2B,gBA3BE;;AAuDvBZ,WAAON,SAAP,GAAmBA,SAAnB;AACA,WAAO,0BAAWjB,IAAX,EAAiBK,IAAjB,EAAuBM,OAAvB,EAAgCY,MAAhC,CAAP;AACD,G","file":"source.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { DragSource } from 'react-dnd'\n\nexport default (type) => {\n  const style = {\n    position: 'absolute',\n    cursor: 'move',\n    pointerEvents: 'auto'\n  }\n\n  const spec = {\n    beginDrag (props) {\n      const { el, left, top } = props\n      return { el, left, top }\n    }\n  }\n\n  function collect (connect, monitor) {\n    return {\n      connectDragSource: connect.dragSource(),\n      isDragging: monitor.isDragging()\n    }\n  }\n\n  const propTypes = {\n    el: PropTypes.element.isRequired,\n    isDragging: PropTypes.bool.isRequired,\n    connectDragSource: PropTypes.func.isRequired\n  }\n\n  class Source extends Component {\n    render () {\n      const { isDragging, connectDragSource, el, left, top } = this.props\n      const t = window.document.getElementById(`${type}-t`)\n      const win = t.ownerDocument.defaultView\n      const POINTER_EVENTS = 'pointer-events'\n      const pe = win.getComputedStyle(t, null)[POINTER_EVENTS]\n      if (isDragging) {\n        if (pe !== 'auto') {\n          t.style[POINTER_EVENTS] = 'auto'\n        }\n        return null\n      } else {\n        if (pe !== 'none') {\n          t.style[POINTER_EVENTS] = 'none'\n        }\n      }\n      return connectDragSource(\n        <div\n          id={`${type}-s`}\n          style={Object.assign({ left, top, opacity: isDragging ? 0.5 : 1 }, style)}\n        >\n          {el}\n        </div>\n      )\n    }\n  }\n\n  Source.propTypes = propTypes\n  return DragSource(type, spec, collect)(Source)\n}\n"]}